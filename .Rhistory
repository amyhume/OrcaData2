library(OrcaData2)
library(tidyverse)
library(zipcodeR)
library(maps)
setwd("/Volumes/ISLAND/Projects/ORCA/ORCA 2.0/Recruitment")
token <- '950056F36783568FBA0900EFAE8AA4A4'
#Pulling screener responses within time frame
screener <- get_orca_screener(token, min_date_time = "2024-05-22 15:53:13")
flagged_emails <- read.csv('./Ineligible/flagged_emails.csv', na.strings="")
#!/usr/bin/env Rscript
token <- "25120FD84FFDA3B220617BDF23B680CD"
url <- "https://redcap.nyu.edu/api/"
formData <- list("token"=token,
content='record',
action='export',
format='csv',
type='flat',
csvDelimiter='',
'forms[0]'='participant_information',
'arms[0]'='arm_3',
rawOrLabel='raw',
rawOrLabelHeaders='raw',
exportCheckboxLabel='false',
exportSurveyFields='false',
exportDataAccessGroups='false',
returnFormat='json'
)
response <- httr::POST(url, body = formData, encode = "form")
result <- httr::content(response)
print(result)
View(result)
#!/usr/bin/env Rscript
token <- "25120FD84FFDA3B220617BDF23B680CD"
url <- "https://redcap.nyu.edu/api/"
formData <- list("token"=token,
content='record',
action='export',
format='csv',
type='flat',
csvDelimiter='',
'forms[0]'='participant_information',
'events[0]'='mice_bl_immediate_arm_3',
'events[1]'='mice_bl_24hour_arm_3',
'events[2]'='mice_bl_1week_arm_3',
rawOrLabel='raw',
rawOrLabelHeaders='raw',
exportCheckboxLabel='false',
exportSurveyFields='false',
exportDataAccessGroups='false',
returnFormat='json'
)
response <- httr::POST(url, body = formData, encode = "form")
result <- httr::content(response)
print(result)
View(result)
#!/usr/bin/env Rscript
token <- "25120FD84FFDA3B220617BDF23B680CD"
url <- "https://redcap.nyu.edu/api/"
formData <- list("token"=token,
content='arm',
format='csv',
'arms[0]'='3',
returnFormat='json'
)
response <- httr::POST(url, body = formData, encode = "form")
result <- httr::content(response)
print(result)
View(result)
#!/usr/bin/env Rscript
token <- "25120FD84FFDA3B220617BDF23B680CD"
url <- "https://redcap.nyu.edu/api/"
formData <- list("token"=token,
content='record',
action='export',
format='csv',
type='flat',
csvDelimiter='',
'forms[0]'='participant_information',
'events[0]'='mice_bl_immediate_arm_3',
'events[1]'='mice_bl_24hour_arm_3',
'events[2]'='mice_bl_1week_arm_3',
rawOrLabel='raw',
rawOrLabelHeaders='raw',
exportCheckboxLabel='false',
exportSurveyFields='false',
exportDataAccessGroups='false',
returnFormat='json'
)
response <- httr::POST(url, body = formData, encode = "form")
result <- httr::content(response)
print(result)
View(result)
library(OrcaData2)
library(tidyverse)
token <- '25120FD84FFDA3B220617BDF23B680CD'
token <- '950056F36783568FBA0900EFAE8AA4A4'
due_date <- get_orca_field(token, field='rec_due_date')
eligibility <- get_orca_field(token, field='orca_contact_yesno')
due_date <- due_date %>%
filter(!is.na(due_date))
due_date <- due_date %>%
filter(!is.na(rec_due_date))
View(due_date)
due_date <- get_orca_field(token, field='rec_due_date')
due_date <- due_date %>%
left_join(eligibility, by='record_id') %>%
select(record_id, rec_due_date, eligibility) %>%
filter(orca_contact_yesno == 1)
due_date <- due_date %>%
left_join(eligibility, by='record_id') %>%
select(record_id, rec_due_date, orca_contact_yesno) %>%
filter(orca_contact_yesno == 1)
View(due_date)
due_date <- due_date %>%
filter(rec_due_date < Sys.Date())
View(due_date)
due_date <- get_orca_field(token, field='rec_due_date')
eligibility <- get_orca_field(token, field='orca_contact_yesno')
due_date <- due_date %>%
left_join(eligibility, by='record_id') %>%
select(record_id, rec_due_date, orca_contact_yesno) %>%
filter(orca_contact_yesno == 1)
due_date <- due_date %>%
filter(rec_due_date > Sys.Date())
due_date$gestational_age <- difftime(Sys.Date(), due_date$rec_due_date, units='w')
View(due_date)
due_date$weeks_till_birth <- difftime(due_date$rec_due_date, Sys.Date(),units='w')
due_date$gestational_age <- 40 - due_date$weeks_till_birth
due_date <- due_date %>%
mutate(trimester = case_when(
gestational_age < 13 ~ 't1',
gestational_age >= 13 & gestational_age < 27 ~ 't2',
gestational_age >= 27 ~ 't3'
))
table(due_date$trimester)
trimesters <- data.frame(table(due_date$trimester))
View(trimesters)
trimesters <- trimesters %>%
rename(trimester = Var1, n = Freq)
setwd("/Users/amyhume/OrcaData2")
roxygen2::roxygenise()
install.packages('roxygen2')
roxygen2::roxygenise()
