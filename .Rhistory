#ISDP Abstract Code
library(tidyverse)
library(OrcaData2)
setwd("/Volumes/ISLAND/User_Folders/Amy_Hume/ISDP 2024")
data <- read.csv('master_data.csv', na.strings="")
View(data)
#CURRENT DEMOGRAPHICS
demo <- get_orca_data(token, form='sociodemographic')
token <- '25120FD84FFDA3B220617BDF23B680CD'
#CURRENT DEMOGRAPHICS
demo <- get_orca_data(token, form='sociodemographic')
demo <- demo %>%
filter(!str_detect(record_id, 'P'))
#RACE
demo$child_race <- tolower(demo$child_race)
demo$child_race_perception <- tolower(demo$child_race_perception)
demo$caregiver_race <- tolower(demo$caregiver_race)
demo <- demo %>%
mutate(child_race_cat = ifelse(str_detect(child_race, 'black') | str_detect(child_race, 'african american') | str_detect(child_race, 'african-american'), 'black/african american',
ifelse(str_detect(child_race, 'caucasian') | str_detect(child_race, 'white'), 'white',
ifelse(str_detect(child_race, 'hispan') | str_detect(child_race, 'latin'), 'hispanic/latino', child_race))))
demo <- demo %>%
mutate(caregiver_race_cat = ifelse(str_detect(caregiver_race, 'black') | str_detect(caregiver_race, 'african american') | str_detect(caregiver_race, 'african-american'), 'black/african american',
ifelse(str_detect(caregiver_race, 'caucasian') | str_detect(caregiver_race, 'white'), 'white',
ifelse(str_detect(caregiver_race, 'hispan') | str_detect(caregiver_race, 'latin'), 'hispanic/latino', caregiver_race))))
non_white_completed <- nrow(subset(demo, !str_detect(tolower(caregiver_race_cat), 'white'))) / nrow(demo) *100
#education
demo <- demo %>%
mutate(low_ses = ifelse(caregiver_ed == 4 | caregiver_ed == 5, 'N', 'Y'))
demo$annual_income <- as.character(demo$annual_income)
demo <- calculate_itn(demo)
setwd("/Users/amyhume/OrcaData2")
roxygen2::roxygenise()
remove.packages("OrcaData2")
devtools::install_github("amyhume/OrcaData2")
