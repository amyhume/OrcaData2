#devtools::install_github("amyhume/OrcaData2")
library(OrcaData2)
library(tidyverse)
library(openxlsx)
setwd("/Volumes/ISLAND/Projects/ORCA/ORCA 2.0/Recruitment")
screener <- read.xlsx("ORCA Screener.xlsx")
import_file <- screener %>%
filter(!is.na(screener_record_id) & is.na(imported_to_redcap)) %>%
select(screener_record_id, send_scheduling_email) %>%
rename(record_id = screener_record_id, orca_contact_yesno = send_scheduling_email)
filename <- paste0('contact_info_update.', Sys.Date(), '.csv')
filename <- gsub("-", '.', filename)
write_csv(import_file, filename, na="")
View(screener)
View(import_file)
View(import_file)
import_data(token, data = import_file)
token <- '950056F36783568FBA0900EFAE8AA4A4'
import_data(token, data = import_file)
x <- get_all_data(token)
View(import_file)
View(x)
unique_events <- unique(import$redcap_event_name)
unique_events <- unique(import_file$redcap_event_name)
View(import_file)
import_file <- screener %>%
filter(!is.na(screener_record_id) & is.na(imported_to_redcap)) %>%
mutate(redcap_event_name = 'orca_screener_arm_1') %>%
select(screener_record_id, send_scheduling_email) %>%
rename(record_id = screener_record_id, orca_contact_yesno = send_scheduling_email) %>%
filename <- paste0('contact_info_update.', Sys.Date(), '.csv')
screener <- read.xlsx("ORCA Screener.xlsx")
import_file <- screener %>%
filter(!is.na(screener_record_id) & is.na(imported_to_redcap)) %>%
mutate(redcap_event_name = 'orca_screener_arm_1') %>%
select(screener_record_id, send_scheduling_email) %>%
rename(record_id = screener_record_id, orca_contact_yesno = send_scheduling_email) %>%
View(import_file)
#devtools::install_github("amyhume/OrcaData2")
library(OrcaData2)
library(tidyverse)
library(openxlsx)
token <- '950056F36783568FBA0900EFAE8AA4A4'
setwd("/Volumes/ISLAND/Projects/ORCA/ORCA 2.0/Recruitment")
screener <- read.xlsx("ORCA Screener.xlsx")
import_file <- screener %>%
filter(!is.na(screener_record_id) & is.na(imported_to_redcap)) %>%
mutate(redcap_event_name = 'orca_screener_arm_1') %>%
select(screener_record_id, send_scheduling_email) %>%
rename(record_id = screener_record_id, orca_contact_yesno = send_scheduling_email)
View(import_file)
import_file <- screener %>%
filter(!is.na(screener_record_id) & is.na(imported_to_redcap)) %>%
mutate(redcap_event_name = 'orca_screener_arm_1') %>%
select(screener_record_id, redcap_event_name, send_scheduling_email) %>%
rename(record_id = screener_record_id, orca_contact_yesno = send_scheduling_email)
View(import_file)
unique_events <- unique(import_file$redcap_event_name)
#pulling existing redcap data
all <- get_all_data(token)
all <- filter(all, redcap_event_name == unique_events)
all <- all[, colnames(all) %in% colnames(data)]
View(all)
all <- get_all_data(token)
all <- filter(all, redcap_event_name == unique_events)
View(all)
View(import_file)
all <- all[, colnames(all) %in% colnames(import_file)]
View(all)
test <- all %>%
full_join(import_file, by=c('record_id', 'redcap_event_name'))
View(test)
test <- all %>%
full_join(import_file)
test <- all %>%
full_join(import_file, by=c('record_id', 'redcap_event_name'))
import_data(token, data = import_file)
test <- all %>%
right_join(import_file, by=c('record_id', 'redcap_event_name'))
View(test)
setwd("/Users/amyhume/OrcaData2")
roxygen2::roxygenise()
